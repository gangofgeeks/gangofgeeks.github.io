<html>
<head> 
    <script type="text/javascript">
         var value = 0;
         var globalValue = value;
         start = Date.now();
      function download(text, name, type) {

  var a = document.getElementById("a");
  var file = new Blob([text], {type: type});
  a.href = URL.createObjectURL(file);
  a.download = name;
  //refreshAnswers();
}

 map1 = new Map();

map1.set('2015-16 Fall', 0);
map1.set('2015-16 Invitaional', 1);
map1.set('2015-16 Spring', 2);
map1.set('2017-18 Fall', 3);
map1.set('2017-18 Invitaional', 4);
map1.set('2017-18 Spring', 5);
map1.set('2018-19 Fall', 6);
map1.set('2018-19 Invitaional', 7);
map1.set('2018-19 Spring', 8);
map1.set('2019-20 Fall', 9);
map1.set('2019-20 Invitaional', 10);
map1.set('2019-20 Spring', 11);
map1.set('2020-21 Fall', 12);
map1.set('2020-21 Invitaional', 13);
map1.set('2020-21 Spring', 14);
 map1 = new Map([...map1].sort());


function getKeyByValue(passedValue) {
    console.log("value is:"+passedValue);
    for (let [key, value1] of map1) {
    if(passedValue == value1){
        return key;
    }
    
}
return "Not Found";
}

function checkAnswers(){

     var uilAnswers=[

     /*
        
     */


    



     //2015-16_chess_puzzle_tests.pdf
['c','a','b','b','b','c','a','c','a','b','d','a','b','d','d','a','c','b','a','b',],
['b','a','c','a','b','c','a','b','d','c','a','c','b','b','d','a','a','a','c','a',],
['A','C','B','B','C','C','D','B','D','B','C','D','B','A','D','D','C','C','A','C',],

//2017-18_chess_tests.pdf
['C','A','B','B','C','C','B','A','C','C','B','D','A','B','B','C','B','C','C','C',],
['','','','','','','','','','','','','','','','','','','','',],
['a','b','c','a','c','a','c','c','b','a','d','c','c','a','b','c','c','b','a','d',],
//chess_packet_1920.pdf
['B','C','A','A','C','C','B','A','B','A','A','D','A','C','A','A','A','C','A','D',],
['B','C','A','A','C','A','D','B','D','A','C','B','A','C','B','D','D','D','B','A',],
['A','C','B','B','D','B','C','A','A','D','C','B','D','C','D','A','D','A','A','D',],
//chess_packet_2021.pdf
['B','A','C','B','C','C','B','B','B','A','D','B','B','D','A','B','D','A','B','D',],
['A','B','C','C','A','A','A','C','A','A','C','B','D','B','A','A','D','B','C','A',],
['A','C','B','A','C','B','C','A','A','C','C','A','C','B','D','B','B','A','D','C',],
//chess_packet_2122.pdf
['B','C','A','B','C','A','B','A','B','A','A','C','B','C','B','D','C','B','A','C',],
['B','A','C','A','C','B','B','A','D','A','A','C','A','B','B','A','B','C','B','A',],
['A','B','C','B','C','B','C','D','C','A','B','A','B','D','B','B','B','B','C','C',],

 

     ];
     var correct=[];
     var wrong=[];
     var correctCount = 0;
     var wrongCount = 0;
     for (let i = 1; i <= 20; i++) {
        if(document.getElementById(i).value != null && uilAnswers[globalValue][i-1].toUpperCase().trim() == document.getElementById(i).value.trim().toUpperCase()){
            correct[correctCount]=i;
            correctCount++;
            document.getElementById("ans"+i).style.color="green";
            document.getElementById("ans"+i).innerHTML="Correct";
        }
        else{
           wrong[wrongCount]=i;
           wrongCount++;
           document.getElementById("ans"+i).style.color="red";
           document.getElementById("ans"+i).innerHTML="Wrong. Correct Answer is "+uilAnswers[globalValue][i-1];
        }
     }
     document.getElementById("score").innerHTML="Score-"+correctCount+" out of 20";
     if(correctCount<=1){
                document.getElementById("scoreImage").src="giphy-1.gif";
     }
     else if(correctCount<=5){
        document.getElementById("scoreImage").src="giphy-5.gif";
     }
     if(correctCount>12){
         document.getElementById("scoreImage").src="marketmove-mm.gif";
     }
     
     
     document.getElementById("scoreImage").style.display="block";

     
     var retText = "correct:"+correctCount;
     retText+= "     wrong:"+wrongCount;
     retText+="    wrong ones:"+wrong;
      retText+="    all answers:"+uilAnswers[[globalValue]];
      return retText;


     

}

function refreshAnswers(){
    
    document.getElementById("1").value="";
    document.getElementById("2").value="";
    document.getElementById("3").value="";
    document.getElementById("4").value="";
    document.getElementById("5").value="";
    document.getElementById("6").value="";
    document.getElementById("7").value="";
    document.getElementById("8").value="";
    document.getElementById("9").value="";
    document.getElementById("10").value="";
    document.getElementById("11").value="";
    document.getElementById("12").value="";
    document.getElementById("13").value="";
    document.getElementById("14").value="";
    document.getElementById("15").value="";
    document.getElementById("16").value="";
    document.getElementById("17").value="";
    document.getElementById("18").value="";
    document.getElementById("19").value="";
    document.getElementById("20").value="";
    
}


function startTime() {
  const today = new Date();
  let h = today.getHours();
  let m = today.getMinutes();
  let s = today.getSeconds();
  m = checkTime(m);
  s = checkTime(s);
  document.getElementById('txt').innerHTML =  Math.trunc((today-start)/1000/60)+" minutes "+ Math.trunc((((today-start)/1000)%60))+" seconds";
  setTimeout(startTime, 1000);
}

function checkTime(i) {
  if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
  return i;
}

function downloadToFile(content, filename, contentType){
  content+="         " + checkAnswers(); 
  const a = document.createElement('a');
  const file = new Blob([content], {type: contentType});
  
  a.href= URL.createObjectURL(file);
  a.download = filename;
  a.click();

    URL.revokeObjectURL(a.href);
    //refreshAnswers();
};
        
        function changeImage(){
            if(value == 11){
                return false;
            }
            let text = "Go to next Test?\nOK for Yes or Cancel for No.";
       if (confirm(text) == true) {
            
            value = value+1;
            globalValue= value;
            document.getElementById("previous").disabled=false;
            document.getElementById("previousTop").disabled=false;
            start = Date.now();
            document.getElementById("uil1").src = "puzzles2/uil1-"+value+ ".png";
            document.getElementById("uil2").src = "puzzles2/uil2-"+value+ ".png";
            document.getElementById("uil3").src = "puzzles2/uil3-"+value+ ".png";
            document.getElementById("uil4").src = "puzzles2/uil4-"+value+ ".png";
            document.getElementById("uil5").src = "puzzles2/uil5-"+value+ ".png";
            refreshAnswers();
            window.scrollTo(0, 0);
            document.getElementById("Test").innerHTML = " Test "+ getKeyByValue(globalValue)+ "  loaded";
            document.getElementById("TestBottom").innerHTML = " Test "+ getKeyByValue(globalValue+1)+ "  loaded";
            document.getElementById("score").innerHTML="";
            document.getElementById("scoreImage").style.display="none";
    for(i=1;i<=20;i++){
        document.getElementById("ans"+i).innerHTML="";

    }
        }
        }




function updateTest(){
            let text = "Go to selected "+ getKeyByValue(document.getElementById("rec_mode").value)+ " UIL Test?\nOK for Yes or Cancel for No.";
       if (confirm(text) == true) {
            
            value = Math.trunc(document.getElementById("rec_mode").value);
            globalValue= value;
            document.getElementById("previous").disabled=false;
            document.getElementById("previousTop").disabled=false;
            start = Date.now();
            document.getElementById("uil1").src = "puzzles2/uil1-"+value+ ".png";
            document.getElementById("uil2").src = "puzzles2/uil2-"+value+ ".png";
            document.getElementById("uil3").src = "puzzles2/uil3-"+value+ ".png";
            document.getElementById("uil4").src = "puzzles2/uil4-"+value+ ".png";
            document.getElementById("uil5").src = "puzzles2/uil5-"+value+ ".png";
            refreshAnswers();
            window.scrollTo(0, 0);
            document.getElementById("Test").innerHTML = " Test "+ getKeyByValue(globalValue)+ "  loaded";
            document.getElementById("TestBottom").innerHTML = " Test "+ getKeyByValue(globalValue)+ "  loaded";
            document.getElementById("score").innerHTML="";
            document.getElementById("scoreImage").style.display="none";
    for(i=1;i<=20;i++){
        document.getElementById("ans"+i).innerHTML="";

    }
        }
        }



        function previousImage(){
            if(value == 0){
                return false;
            }
            let text = "Go to previous Test?\nOK for Yes or Cancel for No.";
       if (confirm(text) == true) {
            value = value-1;
            globalValue= value;
            if(globalValue == 0){
                document.getElementById("previous").disabled=true;
            document.getElementById("previousTop").disabled=true;
            }
            start = Date.now();
           
            document.getElementById("uil1").src = "puzzles2/uil1-"+value+ ".png";
            document.getElementById("uil2").src = "puzzles2/uil2-"+value+ ".png";
            document.getElementById("uil3").src = "puzzles2/uil3-"+value+ ".png";
            document.getElementById("uil4").src = "puzzles2/uil4-"+value+ ".png";
            document.getElementById("uil5").src = "puzzles2/uil5-"+value+ ".png";
            refreshAnswers();
            window.scrollTo(0, 0);
            document.getElementById("Test").innerHTML = " Test "+ getKeyByValue(globalValue)+ "  loaded";
            document.getElementById("TestBottom").innerHTML = " Test "+ getKeyByValue(globalValue)+ "  loaded";
            document.getElementById("score").innerHTML="";
    for(i=1;i<=20;i++){
        document.getElementById("ans"+i).innerHTML="";

    }
        }
    }
    </script>


</head>
<body onload="startTime()"> 
    <div style="text-align: center;">
    <img src="giphy.gif" height="100px" width="100px"></img>
    
</div>

    <div style="text-align: center;color:gold;font-size: 20px;" id="txt"></div>
    <br/>
    <div style="text-align: center;font-size: 20px;">
    <select id="rec_mode" onchange="updateTest()">        
      </select>
  </div>
      <script type="text/javascript">
    var select = document.getElementById("rec_mode");

for (let [key, value] of map1) {
    select.options[select.options.length] = new Option(key, value);
}
</script>
     <div style="text-align: center;color:green;font-size: 20px;" id="Test" color="green"></div>
    <button style="height: 30px; width: 100px;display:none;" onclick="return changeImage();">Next Test</button>
   <button  id="previousTop" style="height: 30px; width: 100px;display:none;" onclick="return previousImage();">Previous Test</button>
   <div style="text-align:right;margin-right: 250px;">
      <button style="height: 30px; width: 120px;background-color:blue;color:white" onclick="downloadToFile(

'Time Taken:' + ((Date.now()-start)/1000) +
    '1.' + document.getElementById('1').value + '   ' +

'2.' + document.getElementById('2').value + '   ' +
'3.' + document.getElementById('3').value + '   ' +
'4.' + document.getElementById('4').value + '   ' +
'5.' + document.getElementById('5').value + '   ' +
'6.' + document.getElementById('6').value + '   ' +
'7.' + document.getElementById('7').value + '   ' +
'8.' + document.getElementById('8').value + '   ' +
'9.' + document.getElementById('9').value + '   ' +
'10.' + document.getElementById('10').value + '   ' +
'11.' + document.getElementById('11').value + '   ' +
'12.' + document.getElementById('12').value + '   ' +
'13.' + document.getElementById('13').value + '   ' +
'14.' + document.getElementById('14').value + '   ' +
'15.' + document.getElementById('15').value + '   ' +
'16.' + document.getElementById('16').value + '   ' +
'17.' + document.getElementById('17').value + '   ' +
'18.' + document.getElementById('18').value + '   ' +
'19.' + document.getElementById('19').value + '   ' +
'20.' + document.getElementById('20').value , 'uilFour-' + globalValue, 'text/plain')">Save Answers</button>
</div>
<div style="text-align:center;color:blue;align-content:center ;">
  <div id="score" ></div>
  <div align="center">
    <img id="scoreImage" src="haha-baby.gif" style="text-align: center;width: 100px;height: 100px;display: none;"></img>
</div>
</div>
    <table height="100%" width="100%">
        <tr>
            <td height="70%" width="70%">
    <image  id="uil1" src="puzzles2/uil1-0.png"></image>
</td>
<td align="left">
    Answer 1<input id="1"></input>
    <div id="ans1"></div>
    <br/>
    Answer 2<input id="2"></input>
    <div id="ans2"></div>
   
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    
    Answer 3<input id="3"></input>
    <div id="ans3"></div>
    <br/>

    Answer 4<input id="4"></input>
    <div id="ans4"></div>
   
   
    </td>
</tr>
    <tr>
            <td height="70%" width="70%">
    <image id="uil2" src="puzzles2/uil2-0.png"></image>
</td>
<td>
    Answer 5<input id="5" ></input>
     <div id="ans5"></div>
    <br/>
    Answer 6<input id="6"></input>
     <div id="ans6"></div>
   
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    Answer 7<input id="7"></input>
     <div id="ans7"></div>
    <br/>
    Answer 8<input id="8"></input>
     <div id="ans8"></div>

   
   
    </td>
</tr>
<tr>
           <td height="70%" width="70%">
    <image id="uil3" src="puzzles2/uil3-0.png"></image>
</td>
<td>
    Answer 9<input id="9"></input>
     <div id="ans9"></div>
    <br/>
    Answer 10<input id="10"></input>
     <div id="ans10"></div>
   
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    Answer 11<input id="11"></input>
     <div id="ans11"></div>
    <br/>
    Answer 12<input id="12"></input>
     <div id="ans12"></div>

   
   
    </td>
</tr>
<tr>
            <td height="70%" width="70%">
    <image id="uil4" src="puzzles2/uil4-0.png"></image>
</td>
<td>
    Answer 13<input id="13"></input>
     <div id="ans13"></div>
    <br/>
    Answer 14<input id="14"></input>
     <div id="ans14"></div>
   
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    Answer 15<input id="15"></input>
     <div id="ans15"></div>
    <br/>
    Answer 16<input id="16"></input>
     <div id="ans16"></div>

   
   
    </td>
</tr>

<tr>
            <td height="70%" width="70%">
    <image id="uil5" src="puzzles2/uil5-0.png"></image>
</td>
<td>
    Answer 17<input id="17"></input>
     <div id="ans17"></div>
    <br/>
    Answer 18<input id="18"></input>
     <div id="ans18"></div>
   
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    Answer 19<input id="19"></input>
     <div id="ans19"></div>
    <br/>
    Answer 20<input id="20"></input>
     <div id="ans20"></div>

   
   
    </td>
</tr>





</table>
<div style="margin-right: 250px;text-align: right;">
<button  style="height: 30px; width: 100px;display:none;" onclick="return changeImage();">Next Test</button>
<button  id="previous" style="height: 30px; width: 100px;display:none;" onclick="return previousImage();">Previous Test</button>
<button style="height: 30px; width: 120px;background-color:blue;color:white" onclick="downloadToFile(

'Time Taken:' + ((Date.now()-start)/1000) +
    '1.' + document.getElementById('1').value + '   ' +

'2.' + document.getElementById('2').value + '   ' +
'3.' + document.getElementById('3').value + '   ' +
'4.' + document.getElementById('4').value + '   ' +
'5.' + document.getElementById('5').value + '   ' +
'6.' + document.getElementById('6').value + '   ' +
'7.' + document.getElementById('7').value + '   ' +
'8.' + document.getElementById('8').value + '   ' +
'9.' + document.getElementById('9').value + '   ' +
'10.' + document.getElementById('10').value + '   ' +
'11.' + document.getElementById('11').value + '   ' +
'12.' + document.getElementById('12').value + '   ' +
'13.' + document.getElementById('13').value + '   ' +
'14.' + document.getElementById('14').value + '   ' +
'15.' + document.getElementById('15').value + '   ' +
'16.' + document.getElementById('16').value + '   ' +
'17.' + document.getElementById('17').value + '   ' +
'18.' + document.getElementById('18').value + '   ' +
'19.' + document.getElementById('19').value + '   ' +
'20.' + document.getElementById('20').value , 'uilFour-' + globalValue, 'text/plain')">Save Answers</button>
</div>
<div style="text-align: center;color:green" id="TestBottom" color="green">First Test loaded</div>
 </body>
</html>   